<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Padotopia</title>
  <meta name="description" content="Padotopia: associazione culturale a Padova. Eventi, progetti, comunità." />

  <!-- Open Graph -->
  <meta property="og:title" content="Padotopia" />
  <meta property="og:description" content="Associazione culturale a Padova: eventi, progetti, comunità." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.padotopia.it/" />

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="#top" aria-label="Padotopia, home">
        <span class="brand__logoWrap" aria-hidden="true">
          <img class="brand__logo" src="assets/logo-padotopia.svg" alt="" />
        </span>
        <span class="brand__name">Padotopia</span>
      </a>

      <nav class="nav" aria-label="Menu principale">
        <a href="#chi-siamo">Chi siamo</a>
        <a href="#eventi">Eventi</a>
        <a href="#contatti">Contatti</a>
      </nav>

      <a class="nav__cta" href="#contatti">Partecipa</a>
    </div>
  </header>

  <main id="top">
    <!-- HERO -->
    <section class="hero" aria-label="Copertina Padotopia">
      <div class="hero__bg" role="img" aria-label="Immagine di copertina"></div>
      <div class="hero__shade" aria-hidden="true"></div>

      <div class="container hero__content">
        <p class="pill">Associazione culturale • Padova</p>

        <h1>
          Cultura, città e comunità.<br />
          Un luogo dove le idee diventano iniziative.
        </h1>

        <p class="lead">
          Eventi, talk, laboratori e progetti partecipati. Padotopia costruisce connessioni tra persone e territori.
        </p>

        <div class="cta">
          <a class="btn btn--primary" href="#eventi">Vedi i prossimi eventi</a>
          <a class="btn btn--ghost" href="#chi-siamo">Scopri Padotopia</a>
        </div>

        <div class="highlights">
          <div class="highlight">
            <div class="k">Format</div>
            <div class="v">incontri, talk, passeggiate</div>
          </div>
          <div class="highlight">
            <div class="k">Approccio</div>
            <div class="v">accessibile, curato, locale</div>
          </div>
          <div class="highlight">
            <div class="k">Collab</div>
            <div class="v">reti con realtà del territorio</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CHI SIAMO -->
    <section class="section" id="chi-siamo">
      <div class="container">
        <div class="section__head">
          <h2>Chi siamo</h2>
          <p class="muted">
            Padotopia è un’associazione culturale che promuove iniziative e progetti per valorizzare Padova
            e i suoi immaginari: cultura, cittadinanza, innovazione sociale.
          </p>
        </div>

        <div class="grid3">
          <article class="card">
            <h3>Eventi</h3>
            <p>Incontri e format snelli, con contenuti solidi e ospiti interessanti.</p>
          </article>

          <article class="card">
            <h3>Progetti</h3>
            <p>Collaborazioni con associazioni, scuole, enti e gruppi locali.</p>
          </article>

          <article class="card">
            <h3>Comunità</h3>
            <p>Una rete aperta: partecipazione, volontariato e idee che diventano azioni.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- EVENTI -->
    <section class="section" id="eventi">
      <div class="container">
        <div class="section__head">
          <h2>Prossimi eventi</h2>
        </div>

        <div id="eventsGrid" class="grid2" aria-live="polite"></div>

        <div id="eventsEmpty" class="card" style="display:none; margin-top:14px;">
          <h3>Nessun evento pubblicato</h3>
          <p class="muted">Stiamo aggiornando il calendario. Seguici sui canali social per le novità.</p>
          <a class="btn btn--primary" href="#contatti">Contattaci</a>
        </div>
      </div>
    </section>

    <!-- CONTATTI -->
    <section class="section" id="contatti">
      <div class="container">
        <div class="section__head">
          <h2>Contatti</h2>
          <p class="muted">
            Qui teniamo tutto semplice: contatti diretti e link esterni (zero manutenzione, massima affidabilità).
          </p>
        </div>

        <div class="grid2">
          <div class="card">
            <h3>Scrivici</h3>
            <ul class="list">
              <li><strong>Email:</strong> <a href="mailto:info@padotopia.it">info@padotopia.it</a></li>
              <li><strong>Instagram:</strong> <a href="#" rel="noopener">@@padotopia</a></li>
              <li><strong>Padova:</strong> (opzionale) sede / zona</li>
            </ul>
          </div>

          <div class="card">
            <h3>Newsletter</h3>
            <p class="muted">
              Consiglio: usa un servizio esterno (Mailchimp / Brevo) e metti qui il link di iscrizione.
            </p>
            <a class="btn btn--primary" href="#" rel="noopener">Iscriviti</a>
            <p class="tiny muted">Niente database sul sito → più sicurezza e meno rogne.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <p class="tiny muted">© <span id="y"></span> Padotopia</p>
      <p class="tiny muted"><a href="#">Privacy</a> • <a href="#">Cookie</a></p>
    </div>
  </footer>

<script>
  // Footer year
  document.getElementById("y").textContent = new Date().getFullYear();

  // Helpers
  function formatDateIT(yyyyMmDd) {
    const [y, m, d] = yyyyMmDd.split("-").map(Number);
    const dt = new Date(y, m - 1, d);
    return dt.toLocaleDateString("it-IT", { weekday: "long", day: "2-digit", month: "long", year: "numeric" });
  }

  function escapeHtml(str) {
    return String(str ?? "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  async function loadEvents() {
    const grid = document.getElementById("eventsGrid");
    const empty = document.getElementById("eventsEmpty");

    try {
      const res = await fetch("data/events.json", { cache: "no-store" });
      if (!res.ok) throw new Error("Impossibile leggere events.json");
      const events = await res.json();

      // Filter: upcoming (today or future), sort ascending
      const today = new Date();
      today.setHours(0,0,0,0);

      const upcoming = (Array.isArray(events) ? events : [])
        .filter(e => {
          if (!e?.date) return false;
          const [y, m, d] = e.date.split("-").map(Number);
          const dt = new Date(y, m - 1, d);
          dt.setHours(0,0,0,0);
          return dt >= today;
        })
        .sort((a,b) => (a.date + (a.time||"")) > (b.date + (b.time||"")) ? 1 : -1)
        .slice(0, 4); // mostra max 4 eventi in home

      if (upcoming.length === 0) {
        grid.innerHTML = "";
        empty.style.display = "block";
        return;
      }

      empty.style.display = "none";

      grid.innerHTML = upcoming.map(e => {
        const badge = `${formatDateIT(e.date)}${e.time ? " • " + escapeHtml(e.time) : ""}`;
        const title = escapeHtml(e.title);
        const where = escapeHtml(e.where);
        const desc = escapeHtml(e.desc);
        const url = escapeHtml(e.url || "#");

        return `
          <article class="card card--event">
            <div class="badge">${badge}</div>
            <h3>${title}</h3>
            <p class="muted">${where}${desc ? " • " + desc : ""}</p>
            ${e.url ? `<a class="link" href="${url}" rel="noopener">Dettagli →</a>` : ""}
          </article>
        `;
      }).join("");

    } catch (err) {
      // Fallback: mostra pannello vuoto ma senza rompere il sito
      console.warn(err);
      grid.innerHTML = "";
      empty.style.display = "block";
    }
  }

  loadEvents();
</script>
</body>

</html>


