<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Padotopia</title>
  <meta name="description" content="Padotopia: associazione culturale a Padova. Eventi, progetti, comunitÃ ." />

  <!-- Open Graph -->
  <meta property="og:title" content="Padotopia" />
  <meta property="og:description" content="Associazione culturale a Padova: eventi, progetti, comunitÃ ." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.padotopia.it/" />

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">
</head>

<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="#top" aria-label="Padotopia, home">
        <span class="brand__logoWrap" aria-hidden="true">
          <img class="brand__logo" src="assets/logo-padotopia.svg" alt="" />
        </span>
        <span class="brand__name">Padotopia</span>
      </a>

      <nav class="nav" aria-label="Menu principale">
        <a href="#chi-siamo">Chi siamo</a>
        <a href="#eventi">Eventi</a>
        <a href="#contatti">Contatti</a>
      </nav>

      <a class="nav__cta" href="#contatti">Partecipa</a>
    </div>
  </header>

  <main id="top">
    <!-- HERO -->
    <section class="hero" aria-label="Copertina Padotopia">
      <div class="hero__bg" role="img" aria-label="Immagine di copertina"></div>
      <div class="hero__shade" aria-hidden="true"></div>

      <div class="container hero__content">
        <p class="pill">Associazione culturale â€¢ Padova</p>

        <h1>
          Cultura, cittÃ  e comunitÃ .<br />
          Un luogo dove le idee diventano iniziative.
        </h1>

        <p class="lead">
          Eventi, talk, laboratori e progetti partecipati. Padotopia costruisce connessioni tra persone e territori.
        </p>

        <div class="cta">
          <a class="btn btn--primary" href="#eventi">Vedi i prossimi eventi</a>
          <a class="btn btn--ghost" href="#chi-siamo">Scopri Padotopia</a>
        </div>

        <div class="highlights">
          <div class="highlight">
            <div class="k">Format</div>
            <div class="v">incontri, talk, passeggiate</div>
          </div>
          <div class="highlight">
            <div class="k">Approccio</div>
            <div class="v">accessibile, curato, locale</div>
          </div>
          <div class="highlight">
            <div class="k">Collab</div>
            <div class="v">reti con realtÃ  del territorio</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CHI SIAMO -->
    <section class="section" id="chi-siamo">
      <div class="container">
        <div class="section__head">
          <h2>Chi siamo</h2>
          <p class="muted">
            Padotopia Ã¨ unâ€™associazione culturale che promuove iniziative e progetti per valorizzare Padova
            e i suoi immaginari: cultura, cittadinanza, innovazione sociale.
          </p>
        </div>

        <div class="grid3">
          <article class="card">
            <h3>Eventi</h3>
            <p>Incontri e format snelli, con contenuti solidi e ospiti interessanti.</p>
          </article>

          <article class="card">
            <h3>Progetti</h3>
            <p>Collaborazioni con associazioni, scuole, enti e gruppi locali.</p>
          </article>

          <article class="card">
            <h3>ComunitÃ </h3>
            <p>Una rete aperta: partecipazione, volontariato e idee che diventano azioni.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- EVENTI -->
    <section class="section" id="eventi">
      <div class="container">
        <div class="section__head">
          <h2>Prossimi eventi</h2>
        </div>

        <div id="eventsGrid" class="grid2" aria-live="polite"></div>

        <div id="eventsEmpty" class="card" style="display:none; margin-top:14px;">
          <h3>Nessun evento pubblicato</h3>
          <p class="muted">Stiamo aggiornando il calendario. Seguici sui canali social per le novitÃ .</p>
          <a class="btn btn--primary" href="#contatti">Contattaci</a>
        </div>
      </div>
    </section>
<!-- CONTATTI -->
<section class="section" id="contatti">
  <div class="container">
    <div class="section__head">
      <h2>Contatti</h2>
      <p class="muted">
        Qui teniamo tutto semplice: contatti diretti e link esterni (zero manutenzione, massima affidabilitÃ ).
      </p>
    </div>

    <div class="grid2">
      <!-- CARD 1 -->
      <div class="card">
        <h3>Scrivici</h3>
        <ul class="list">
          <li><strong>Email:</strong> <a href="mailto:info@padotopia.it">info@padotopia.it</a></li>
          <li><strong>Instagram:</strong> <a href="#" rel="noopener">@@padotopia</a></li>
          <li><strong>Padova:</strong> (opzionale) sede / zona</li>
        </ul>
      </div>

      <!-- CARD 2: NEWSLETTER -->
      <div class="card" id="newsletter">
        <h3>Newsletter</h3>
        <p class="muted">Una mail a settimana con eventi e progetti. Niente spam.</p>

        <!-- BREVO FORM START -->
        <div class="sib-form" style="text-align:center;">
          <div id="sib-form-container" class="sib-form-container">
            <div id="sib-container" class="sib-container--large sib-container--vertical" style="max-width:540px;">
              <form
                id="sib-form"
                method="POST"
                action="https://8d581b99.sibforms.com/serve/MUIFAPVu_GpKpx2OC03JVHz_jhjZQau5fsCdIegmn-wf8meBkNlTwOjpjtTvA5bPDO23VawMonp-ZFvhc90trusKKp-ZVX-eUQ5AfT8FSIkw6-Q4aEXD0GJ4xLG554rGKNs_zdHHM-Kj9VVddxgeTqm-B25ABD-OuvyjdJhh70QhbKdGo3fXZVTL8i6mnUa0PGheoovY0chFRA1Xaw=="
              >
                <div class="sib-input sib-form-block" style="text-align:left;">
                  <label class="entry__label" for="EMAIL" data-required="*">Email</label>
                  <div class="entry__field">
                    <input
                      class="input"
                      type="email"
                      id="EMAIL"
                      name="EMAIL"
                      autocomplete="email"
                      placeholder="nome@dominio.it"
                      data-required="true"
                      required
                    />
                  </div>

                  <label class="entry__error entry__error--primary"></label>

                  <div class="entry__specification" style="margin-top:6px;">
                    Riceverai unâ€™email per confermare la tua iscrizione.
                  </div>
                </div>

                <div class="sib-form-block" style="text-align:left; margin-top:12px;">
<button class="sib-form-block__button sib-form-block__button-with-loader btn btn--primary" form="sib-form" type="submit">
  Iscriviti
</button>
                </div>

                <input type="text" name="email_address_check" value="" class="input--hidden">
                <input type="hidden" name="locale" value="it">
                <input type="hidden" name="html_type" value="simple">
              </form>
            </div>
          </div>
        </div>
        <!-- BREVO FORM END -->

        <p class="tiny muted" style="margin-top:10px;">
          Iscrivendoti accetti la nostra informativa privacy. Puoi disiscriverti in qualsiasi momento.
        </p>
      </div>
    </div>
  </div>
</section>
    
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <p class="tiny muted">Â© <span id="y"></span> Padotopia</p>
      <p class="tiny muted"><a href="#">Privacy</a> â€¢ <a href="#">Cookie</a></p>
    </div>
  </footer>

<script>
  // Footer year
  document.getElementById("y").textContent = new Date().getFullYear();

  // Helpers
  function formatDateIT(yyyyMmDd) {
    const [y, m, d] = yyyyMmDd.split("-").map(Number);
    const dt = new Date(y, m - 1, d);
    return dt.toLocaleDateString("it-IT", { weekday: "long", day: "2-digit", month: "long", year: "numeric" });
  }

  function escapeHtml(str) {
    return String(str ?? "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  async function loadEvents() {
    const grid = document.getElementById("eventsGrid");
    const empty = document.getElementById("eventsEmpty");

    try {
      const res = await fetch("data/events.json", { cache: "no-store" });
      if (!res.ok) throw new Error("Impossibile leggere events.json");
      const events = await res.json();

      // Filter: upcoming (today or future), sort ascending
      const today = new Date();
      today.setHours(0,0,0,0);

      const upcoming = (Array.isArray(events) ? events : [])
        .filter(e => {
          if (!e?.date) return false;
          const [y, m, d] = e.date.split("-").map(Number);
          const dt = new Date(y, m - 1, d);
          dt.setHours(0,0,0,0);
          return dt >= today;
        })
        .sort((a,b) => (a.date + (a.time||"")) > (b.date + (b.time||"")) ? 1 : -1)
        .slice(0, 24); // mostra max 4 eventi in home

      if (upcoming.length === 0) {
        grid.innerHTML = "";
        empty.style.display = "block";
        return;
      }

      empty.style.display = "none";

      grid.innerHTML = upcoming.map(e => {
        const badge = `${formatDateIT(e.date)}${e.time ? " â€¢ " + escapeHtml(e.time) : ""}`;
        const title = escapeHtml(e.title);
        const where = escapeHtml(e.where);
        const desc = escapeHtml(e.desc);
        const url = escapeHtml(e.url || "#");
        const posterUrl = e.posterUrl ? escapeHtml(e.posterUrl) : null;

        return `
          <article class="card card--event">
            <div class="badge">${badge}</div>
            <h3>${title}</h3>
            <p class="muted">${where}${desc ? " â€¢ " + desc : ""}</p>

            <div style="margin-top: 14px; display: flex; gap: 15px; align-items: center;">
              ${e.url ? `<a class="link" href="${url}" target="_blank" rel="noopener">Dettagli â†’</a>` : ""}
        
              ${posterUrl ? `
              <a class="link" href="${posterUrl}" target="_blank" style="font-size: 0.9em; opacity: 0.8;">
               ðŸ“„ Locandina (PDF)
              </a>` : ""}
            </div>

          </article>
        `;
      }).join("");

    } catch (err) {
      // Fallback: mostra pannello vuoto ma senza rompere il sito
      console.warn(err);
      grid.innerHTML = "";
      empty.style.display = "block";
    }
  }

  loadEvents();
</script>
</body>

</html>









